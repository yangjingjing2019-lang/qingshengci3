<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>è¼•è²ç¿»å¡è¨˜æ†¶ç·´ç¿’</title>
    <style>
        :root {
            --primary-color: #ff85a2;
            --bg-color: #fff5f7;
            --card-front: #ffffff;
            --card-back: #fff9db;
            --whatsapp-green: #25d366;
            --font-stack: "Yuanti SC", "YouYuan", "STYuanti-SC-Regular", "Microsoft JhengHei", sans-serif;
        }

        body, html {
            margin: 0; padding: 0; height: 100%;
            font-family: var(--font-stack);
            background-color: var(--bg-color);
            overflow-x: hidden;
            -webkit-tap-highlight-color: transparent;
        }

        .header-title {
            position: absolute; top: 15px; right: 20px;
            font-size: 14px; color: #d66d85; z-index: 100; font-weight: bold;
        }

        /* ç™»éŒ„ä»‹é¢ */
        #login-screen {
            position: fixed; inset: 0; background: white;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            z-index: 1000; padding: 20px;
        }

        .login-box {
            background: #fff; padding: 40px; border-radius: 30px;
            box-shadow: 0 20px 50px rgba(255, 133, 162, 0.2);
            max-width: 320px; width: 100%; text-align: center;
            border: 4px solid var(--bg-color);
        }

        input {
            width: 100%; padding: 15px; margin: 12px 0;
            border: 2px solid #ffe0e6; border-radius: 15px;
            box-sizing: border-box; font-size: 16px; outline: none;
        }

        button {
            background: var(--primary-color); color: white; border: none;
            padding: 15px 30px; border-radius: 50px; cursor: pointer;
            font-size: 18px; font-weight: bold;
            box-shadow: 0 6px 0 #d66d85; transition: 0.1s;
            margin-top: 10px; width: 100%;
        }
        button:active { transform: translateY(3px); box-shadow: 0 2px 0 #d66d85; }

        /* ä¸»éŠæˆ²ç•«é¢ */
        #game-screen { display: none; height: 100%; flex-direction: column; align-items: center; justify-content: space-around; padding: 20px 0; box-sizing: border-box; }

        .progress { font-size: 20px; color: #d66d85; font-weight: bold; background: #fff; padding: 5px 20px; border-radius: 20px; box-shadow: 0 4px 10px rgba(0,0,0,0.05); }

        /* å¡ç‰‡è¨­è¨ˆ */
        .card-container { width: 300px; height: 380px; perspective: 1000px; cursor: pointer; }
        .card-inner {
            position: relative; width: 100%; height: 100%;
            text-align: center; transition: transform 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            transform-style: preserve-3d;
        }
        .card-inner.is-flipped { transform: rotateY(180deg); }
        .card-face {
            position: absolute; width: 100%; height: 100%;
            backface-visibility: hidden; display: flex; flex-direction: column;
            align-items: center; justify-content: center;
            border-radius: 35px; border: 12px solid white;
            box-shadow: 0 15px 35px rgba(214, 109, 133, 0.15); box-sizing: border-box;
        }
        .card-front { background: var(--card-front); }
        .card-back { background: var(--card-back); transform: rotateY(180deg); }

        .pinyin { font-size: 38px; font-family: "Calibri", sans-serif; color: #ff6b6b; letter-spacing: 1px; }
        .word { font-size: 78px; font-weight: bold; color: #444; }

        .controls { display: flex; gap: 10px; width: 90%; max-width: 400px; }
        .btn-nav { background: #ffb3c6; box-shadow: 0 6px 0 #e89fb2; flex: 1; padding: 12px 10px; font-size: 16px; }
        .btn-audio { background: #ffd43b; box-shadow: 0 6px 0 #f59f00; color: #856404; flex: 1.2; padding: 12px 10px; font-size: 16px; }

        /* å½™ç¸½é  */
        #summary-screen { display: none; padding: 40px 20px; overflow-y: auto; height: 100%; box-sizing: border-box; }
        
        .full-audio-player {
            background: white; padding: 20px; border-radius: 25px; margin-bottom: 25px;
            box-shadow: 0 10px 20px rgba(255, 133, 162, 0.1); text-align: center; border: 2px dashed #ffb3c6;
        }
        
        .whatsapp-btn {
            background: var(--whatsapp-green) !important;
            box-shadow: 0 6px 0 #128c7e !important;
            margin-bottom: 20px;
        }

        .summary-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(140px, 1fr)); gap: 15px; }
        .summary-item {
            background: white; padding: 20px; border-radius: 25px;
            text-align: center; cursor: pointer; box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            border: 2px solid transparent; transition: 0.2s;
        }
        .summary-item:active { background: var(--card-back); border-color: var(--primary-color); }

        .copyright { font-size: 12px; color: #aaa; line-height: 1.6; margin-top: 30px; text-align: center; }
    </style>
</head>
<body>

<div class="header-title">è¼•è²ç¿»å¡è¨˜æ†¶ç·´ç¿’</div>
<audio id="audio-sprite" src="è¼•è²è©èª3.mp3" preload="auto"></audio>

<div id="login-screen">
    <div class="login-box">
        <h2 style="color: var(--primary-color); margin-bottom: 5px; font-size: 28px;">ğŸŒ¸ è¼•è²ç·´ç¿’</h2>
        <p style="font-size: 14px; color: #b5838d; margin-bottom: 20px;">è«‹è¼¸å…¥å…§éƒ¨è³‡è¨Šé–‹å§‹</p>
        <input type="text" id="username" placeholder="è«‹è¼¸å…¥æ‚¨çš„å§“å">
        <input type="password" id="password" placeholder="è¼¸å…¥å¯†ç¢¼">
        <button onclick="handleLogin()">é–‹å§‹å­¸ç¿’ ğŸš€</button>
        <div class="copyright">
            ç¶²é åƒ…ä¾›VTCå…§éƒ¨ä½¿ç”¨ã€‚<br>
            è·æ¥­è¨“ç·´å±€æ™®é€šè©±åŸ¹è¨“æ¸¬è©¦ä¸­å¿ƒ ç‰ˆæ¬Šæ‰€æœ‰ã€‚
        </div>
    </div>
</div>

<div id="game-screen">
    <div class="progress" id="progress-text">è©èª 1 / 20</div>
    <div class="card-container" onclick="flipCard()">
        <div class="card-inner" id="main-card">
            <div class="card-face card-front">
                <div class="pinyin" id="display-pinyin">Ã i ren</div>
                <div style="margin-top: 40px; color: #ffd1dc; font-size: 16px;">é»æ“Šç¿»è½‰ ğŸ‘†</div>
            </div>
            <div class="card-face card-back">
                <div class="word" id="display-word">ç‡ˆç± </div>
            </div>
        </div>
    </div>
    <div class="controls">
        <button class="btn-nav" onclick="prevCard(event)">â¬…ï¸ ä¸Šä¸€å¼µ</button>
        <button class="btn-audio" onclick="playCurrentAudio(event)">ğŸ”ˆ è½ç™¼éŸ³</button>
        <button class="btn-nav" onclick="nextCard(event)">ä¸‹ä¸€å¼µ â¡ï¸</button>
    </div>
</div>

<div id="summary-screen">
    <h2 style="text-align: center; color: var(--primary-color); font-size: 30px;">ğŸŒŸ ç·´ç¿’æˆæœ</h2>
    
    <div style="text-align: center; margin-bottom: 25px;">
        <button class="whatsapp-btn" onclick="copyAndShare()">âœ… å·²å®Œæˆè·Ÿè®€éŒ„éŸ³æ‰“å¡ï¼</button>
        <p style="font-size: 12px; color: #888; margin-top: -10px;">(é»æ“Šå¾Œè‡ªå‹•è¤‡è£½è³‡è¨Šä¸¦å‰å¾€ WhatsApp)</p>
    </div>

    <div class="full-audio-player">
        <h3 style="color:#d66d85; font-size: 16px; margin-bottom: 10px;">ğŸ§ å®Œæ•´éŒ„éŸ³è¤‡ç¿’</h3>
        <audio id="full-audio-player" style="width:100%" controls src="è¼•è²è©èª3.mp3"></audio>
    </div>

    <div class="summary-grid" id="summary-list"></div>
    
    <div style="text-align: center; margin-top: 40px; padding-bottom: 50px;">
        <button style="background:#95a5a6; box-shadow:0 6px 0 #7f8c8d; width: auto;" onclick="location.reload()">é‡æ–°æŒ‘æˆ°</button>
    </div>
</div>

<script>
    const wordData = [
     { word: "ç‡ˆç± ", pinyin: "dÄ“ng long", start: 1.3, duration: 2 },
    { word: "å ¤é˜²", pinyin: "dÄ« fang", start: 3.3, duration: 2 },
    { word: "å˜€å’•", pinyin: "dÃ­ gu", start: 5.3, duration: 2 },
    { word: "è¨˜æ€§", pinyin: "jÃ¬ xing", start: 7.0, duration: 2 },
    { word: "åœ°æ–¹", pinyin: "dÃ¬ fang", start: 9.0, duration: 2.4 },
    { word: "é»å¿ƒ", pinyin: "diÇn xin", start: 11.8, duration: 2.2 },
    { word: "æ±å®¶", pinyin: "dÅng jia", start: 14.0, duration: 2 },
    { word: "å‹•éœ", pinyin: "dÃ²ng jing", start: 16.0, duration: 2 },
    { word: "å“†å—¦", pinyin: "duÅ suo", start: 18.0, duration: 2 },
    { word: "ç”˜è”—", pinyin: "gÄn zhe", start: 20.0, duration: 2 },
    { word: "é«˜ç²±", pinyin: "gÄo liang", start: 22.0, duration: 2 },
    { word: "èƒ³è†Š", pinyin: "gÄ“ bo", start: 24.3, duration: 2 },
    { word: "ç–™ç˜©", pinyin: "gÄ“ da", start: 26.3, duration: 2},
    { word: "åŠŸå¤«", pinyin: "gÅng fu", start: 28.3, duration: 2},
    { word: "æ©Ÿéˆ", pinyin: "jÄ« ling", start: 30.5, duration: 2 },
    { word: "æ€ªç‰©", pinyin: "guÃ i wu", start: 32.5, duration: 2 },
    { word: "è›¤èŸ†", pinyin: "hÃ¡ ma", start: 34.3, duration: 2 },
    { word: "æ ¸æ¡ƒ", pinyin: "hÃ© tao", start: 36.5, duration: 2 },
    { word: "åšé“", pinyin: "hÃ²u dao", start: 38.5, duration: 2 },
    { word: "è‘«èŠ¦", pinyin: "hÃº lu", start: 41.0, duration: 2.5 }
    ];

    let currentIndex = 0;
    let userName = ""; 
    const audio = document.getElementById('audio-sprite');

    function handleLogin() {
        const pass = document.getElementById('password').value;
        userName = document.getElementById('username').value;
        if (userName === "") { alert("è«‹è¼¸å…¥å§“å"); return; }
        if (pass === "vtcpsc") {
            audio.play().then(() => {
                audio.pause();
                document.getElementById('login-screen').style.display = 'none';
                document.getElementById('game-screen').style.display = 'flex';
                updateCard();
            }).catch(() => {
                document.getElementById('login-screen').style.display = 'none';
                document.getElementById('game-screen').style.display = 'flex';
                updateCard();
            });
        } else {
            alert("è«‹è¼¸å…¥æ­£ç¢ºå¯†ç¢¼");
        }
    }

    function updateCard() {
        const card = document.getElementById('main-card');
        card.classList.remove('is-flipped');
        document.getElementById('display-word').innerText = wordData[currentIndex].word;
        document.getElementById('display-pinyin').innerText = wordData[currentIndex].pinyin;
        document.getElementById('progress-text').innerText = `è©èª ${currentIndex + 1} / ${wordData.length}`;
    }

    function flipCard() {
        const card = document.getElementById('main-card');
        if (!card.classList.contains('is-flipped')) {
            card.classList.add('is-flipped');
            playAudio(currentIndex);
        } else {
            card.classList.remove('is-flipped');
        }
    }

    let audioTimeout;
    function playAudio(index) {
        document.getElementById('full-audio-player').pause();
        clearTimeout(audioTimeout);
        const item = wordData[index];
        audio.currentTime = item.start;
        audio.play();
        audioTimeout = setTimeout(() => { audio.pause(); }, item.duration * 1000);
    }

    function playCurrentAudio(e) { e.stopPropagation(); playAudio(currentIndex); }
    function nextCard(e) {
        e.stopPropagation();
        if (currentIndex < wordData.length - 1) { currentIndex++; updateCard(); }
        else { showSummary(); }
    }
    function prevCard(e) { e.stopPropagation(); if (currentIndex > 0) { currentIndex--; updateCard(); } }

    function showSummary() {
        document.getElementById('game-screen').style.display = 'none';
        const summaryScreen = document.getElementById('summary-screen');
        summaryScreen.style.display = 'block';
        const list = document.getElementById('summary-list');
        list.innerHTML = '';
        wordData.forEach((item, index) => {
            const div = document.createElement('div');
            div.className = 'summary-item';
            div.innerHTML = `<div style="font-size:14px; color:#ff85a2">${item.pinyin}</div>
                             <div style="font-size:26px; font-weight:bold; color:#444">${item.word}</div>`;
            div.onclick = () => playAudio(index);
            list.appendChild(div);
        });
    }

    // æ–°å¢ï¼šè¤‡è£½ä¸¦åˆ†äº«åŠŸèƒ½
    function copyAndShare() {
        const now = new Date();
        const dateStr = `${now.getFullYear()}/${now.getMonth() + 1}/${now.getDate()}`;
        const timeStr = `${now.getHours()}:${now.getMinutes().toString().padStart(2, '0')}`;
        
        const shareText = `ã€æ™®é€šè©±è¼•è²ç·´ç¿’æ‰“å¡ã€‘\nğŸ‘¤ å­¸ç¿’è€…ï¼š${userName}\nğŸ“… å®Œæˆæ—¥æœŸï¼š${dateStr}\nâ° å®Œæˆæ™‚é–“ï¼š${timeStr}\nâœ… ç‹€æ…‹ï¼šå·²å®Œæˆ 20 å€‹è¼•è²è©èªè·Ÿè®€ç·´ç¿’ï¼`;

        // è¤‡è£½åˆ°å‰ªè²¼ç°¿
        navigator.clipboard.writeText(shareText).then(() => {
            alert("âœ¨ æ‰“å¡è³‡è¨Šå·²è¤‡è£½ï¼\nç¾åœ¨å°‡è·³è½‰è‡³ WhatsAppï¼Œæ‚¨å¯ä»¥ç›´æ¥ç²˜è²¼ç™¼é€ã€‚");
            // è·³è½‰åˆ° WhatsApp (é€šç”¨é€£çµ)
            window.location.href = "whatsapp://send?text=" + encodeURIComponent(shareText);
        }).catch(err => {
            // å‚™ç”¨æ–¹æ¡ˆï¼šå¦‚æœæ¬Šé™ä¸å…è¨±è¤‡è£½ï¼Œç›´æ¥å˜—è©¦è·³è½‰
            window.location.href = "whatsapp://send?text=" + encodeURIComponent(shareText);
        });
    }
</script>

</body>
</html>